# DOTS Family Mode Production Performance Tuning
# Optimizes system parameters for production deployment

# Database Performance
vm.dirty_ratio = 5
vm.dirty_background_ratio = 2
vm.dirty_expire_centisecs = 1000
vm.dirty_writeback_centisecs = 100

# Memory management for monitoring workloads
vm.swappiness = 10
vm.vfs_cache_pressure = 50
vm.zone_reclaim_mode = 0

# Process scheduler optimizations
kernel.sched_migration_cost_ns = 5000000
kernel.sched_autogroup_enabled = 0
kernel.sched_tunable_scaling = 0

# Network performance for monitoring traffic
net.core.rmem_max = 16777216
net.core.wmem_max = 16777216
net.core.rmem_default = 262144
net.core.wmem_default = 262144
net.core.netdev_max_backlog = 5000

# eBPF performance optimizations
net.core.bpf_jit_enable = 1
net.core.bpf_jit_kallsyms = 1
kernel.bpf_stats_enabled = 1

# File system performance
fs.file-max = 65536
fs.inotify.max_user_watches = 524288
fs.inotify.max_user_instances = 256

# Process limits for child users
kernel.pid_max = 32768

# Security with performance balance
kernel.randomize_va_space = 2
kernel.exec-shield = 1

# CPU governor for consistent performance
# (Applied via systemd override in production script)